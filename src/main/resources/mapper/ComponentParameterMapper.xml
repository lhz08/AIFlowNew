<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bdilab.aiflow.mapper.ComponentParameterMapper">
  <resultMap id="BaseResultMap" type="com.bdilab.aiflow.model.ComponentParameter">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Aug 30 16:18:08 CST 2020.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="fk_component_info_id" jdbcType="INTEGER" property="fkComponentInfoId" />
    <result column="parameter_type" jdbcType="VARCHAR" property="parameterType" />
    <result column="default_value" jdbcType="VARCHAR" property="defaultValue" />
    <result column="parameter_desc" jdbcType="VARCHAR" property="parameterDesc" />
  </resultMap>

  <insert id="insertComponentParam" useGeneratedKeys="true" keyProperty="id" parameterType="java.util.List">
    INSERT INTO component_parameter
        (id, name, fk_component_info_id,
         parameter_type, default_value, parameter_desc)
    VALUES
    <foreach collection="list" item="param" index="index" separator=",">
      (#{param.id}, #{param.name}, #{param.fkComponentInfoId},
       #{param.parameterType},#{param.defaultValue}, #{param.parameterDesc})
    </foreach>
  </insert>

  <delete id="deleteComponentPermanently" parameterType="java.util.List">
    DELETE FROM component_parameter
    WHERE fk_component_info_id in
    <foreach collection="list" item="fk_component_info_id" separator="," open="(" close=")">
      #{fk_component_info_id}
    </foreach>
  </delete>

  <select id="selectComponentParameterByComponentId" parameterType="Integer" resultType="com.bdilab.aiflow.model.ComponentParameter">
          select component_parameter.id as id,
                 component_parameter.name as name,
                 component_parameter.fk_component_info_id as fkComponentInfoId,
                 component_parameter.parameter_type as parameterType,
                 component_parameter.default_value as defaultValue,
                 component_parameter.parameter_desc as parameterDesc
                 from component_parameter
                 where component_parameter.fk_component_info_id = #{componentInfoId}
  </select>

</mapper>